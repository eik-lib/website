"use strict";(self.webpackChunkeik=self.webpackChunkeik||[]).push([[536],{9673:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"reference/at-eik-cli","title":"@eik/cli reference","description":"The Eik CLI lets you publish to Eik and manage import maps and aliases.","source":"@site/docs/reference/at-eik-cli.md","sourceDirName":"reference","slug":"/reference/at-eik-cli","permalink":"/docs/reference/at-eik-cli","draft":false,"unlisted":false,"editUrl":"https://github.com/eik-lib/eik-lib.github.io/tree/source/docs/reference/at-eik-cli.md","tags":[],"version":"current","frontMatter":{"title":"@eik/cli reference","sidebar_label":"@eik/cli"},"sidebar":"sidebar","previous":{"title":"Publish to Eik on Travis","permalink":"/docs/guides/travis"},"next":{"title":"@eik/node-client","permalink":"/docs/reference/at-eik-node-client"}}');var a=i(4848),l=i(8453);const r={title:"@eik/cli reference",sidebar_label:"@eik/cli"},c=void 0,d={},t=[{value:"Install and run commands",id:"install-and-run-commands",level:2},{value:"Eik command autocomplete in your shell",id:"eik-command-autocomplete-in-your-shell",level:3},{value:"As a devDependency",id:"as-a-devdependency",level:3},{value:"Using <code>npx</code>",id:"using-npx",level:3},{value:"Available commands",id:"available-commands",level:2},{value:"alias",id:"alias",level:3},{value:"init",id:"init",level:3},{value:"integrity",id:"integrity",level:3},{value:"login",id:"login",level:3},{value:"Log in without the command prompt",id:"log-in-without-the-command-prompt",level:4},{value:"Log in with multiple Eik servers",id:"log-in-with-multiple-eik-servers",level:4},{value:"Once logged in",id:"once-logged-in",level:4},{value:"map-alias",id:"map-alias",level:3},{value:"meta",id:"meta",level:3},{value:"npm-alias",id:"npm-alias",level:3},{value:"package-alias",id:"package-alias",level:3},{value:"ping",id:"ping",level:3},{value:"publish",id:"publish",level:3},{value:"version",id:"version",level:3},{value:"Programatic usage",id:"programatic-usage",level:2},{value:"alias",id:"alias-1",level:3},{value:"integrity",id:"integrity-1",level:3},{value:"login",id:"login-1",level:3},{value:"map",id:"map",level:3},{value:"meta",id:"meta-1",level:3},{value:"ping",id:"ping-1",level:3},{value:"publish",id:"publish-1",level:3},{value:"version",id:"version-1",level:3}];function o(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"The Eik CLI lets you publish to Eik and manage import maps and aliases."}),"\n",(0,a.jsx)(n.h2,{id:"install-and-run-commands",children:"Install and run commands"}),"\n",(0,a.jsx)(n.p,{children:"To install the Eik CLI globally:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"npm install --global @eik/cli\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This makes the command ",(0,a.jsx)(n.code,{children:"eik"})," available in your shell."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik --help\n"})}),"\n",(0,a.jsx)(n.p,{children:"To uninstall a globally installed Eik CLI:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"npm uninstall --global @eik/cli\n"})}),"\n",(0,a.jsx)(n.h3,{id:"eik-command-autocomplete-in-your-shell",children:"Eik command autocomplete in your shell"}),"\n",(0,a.jsxs)(n.p,{children:["If you would like to be able to use tab key autocompletion for Eik commands, you can concatentate the following script to your ",(0,a.jsx)(n.code,{children:".zshrc"})," or ",(0,a.jsx)(n.code,{children:".bashrc"})," file."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'###-begin-eik-completions-###\n_eik_yargs_completions()\n{\n  local reply\n  local si=$IFS\n  IFS=$\'\n\' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" eik --get-yargs-completions "${words[@]}"))\n  IFS=$si\n  _describe \'values\' reply\n}\ncompdef _eik_yargs_completions eik\n###-end-eik-completions-###\n'})}),"\n",(0,a.jsx)(n.p,{children:"Once done, you should be able to hit tab while typing Eik commands and get autocomplete suggestions."}),"\n",(0,a.jsx)(n.h3,{id:"as-a-devdependency",children:"As a devDependency"}),"\n",(0,a.jsxs)(n.p,{children:["You can also add the Eik CLI as a ",(0,a.jsx)(n.code,{children:"devDependency"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"npm install --save-dev @eik/cli\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Now you can use ",(0,a.jsx)(n.code,{children:"npx eik"})," to run commands with the version of the Eik CLI in your project."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"npx eik --help\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can also add scripts to ",(0,a.jsx)(n.code,{children:"package.json"})," and run them that way."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n\t"scripts": {\n\t\t"eik:publish": "eik publish"\n\t}\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"npm run eik:publish\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"using-npx",children:["Using ",(0,a.jsx)(n.code,{children:"npx"})]}),"\n",(0,a.jsxs)(n.p,{children:["You can run the Eik CLI from anywhere using ",(0,a.jsx)(n.code,{children:"npx"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"npx @eik/cli --help\n"})}),"\n",(0,a.jsx)(n.h2,{id:"available-commands",children:"Available commands"}),"\n",(0,a.jsxs)(n.p,{children:["Run ",(0,a.jsx)(n.code,{children:"eik"})," with ",(0,a.jsx)(n.code,{children:"--help"})," to see a description of all available commands and their aliases in your shell."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik --help\n"})}),"\n",(0,a.jsx)(n.p,{children:"You can also get help for each individual command the same way."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik init --help\n"})}),"\n",(0,a.jsx)(n.h3,{id:"alias",children:"alias"}),"\n",(0,a.jsxs)(n.p,{children:["Create or update an ",(0,a.jsx)(n.a,{href:"/docs/dependencies/aliases/",children:"alias for a package, npm package, image or import map"})," as identified by its name, version and type."]}),"\n",(0,a.jsxs)(n.p,{children:["A package with the given name and version must already exist on the Eik server. The alias should be the semver major part of the package version. Eg. for a package of version 5.4.3, you should use 5 as the alias. The alias type (npm, map, package, image) is detected from ",(0,a.jsx)(n.code,{children:"eik.json"})," in the current working directory."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik alias <name> <version> <alias>\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Replaces ",(0,a.jsx)(n.code,{children:"package-alias"}),", ",(0,a.jsx)(n.code,{children:"map-alias"})," and ",(0,a.jsx)(n.code,{children:"npm-alias"})," from version ",(0,a.jsx)(n.code,{children:"3.0.0"})," onward."]}),"\n",(0,a.jsx)(n.h3,{id:"init",children:"init"}),"\n",(0,a.jsxs)(n.p,{children:["Creates a new default ",(0,a.jsx)(n.a,{href:"/docs/reference/eik-json/",children:(0,a.jsx)(n.code,{children:"eik.json"})})," and saves it to the current working directory."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik init\n"})}),"\n",(0,a.jsx)(n.h3,{id:"integrity",children:"integrity"}),"\n",(0,a.jsxs)(n.p,{children:["Retrieve file integrity information for package name and version defined in ",(0,a.jsx)(n.a,{href:"/docs/reference/eik-json/",children:(0,a.jsx)(n.code,{children:"eik.json"})}),", then populate ",(0,a.jsx)(n.code,{children:"integrity.json"})," file with this information ",(0,a.jsx)(n.a,{href:"/docs/introduction/workflow#linking-to-your-assets-from-html",children:"for use in subresource integrity"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik integrity [name] [version]\n"})}),"\n",(0,a.jsx)(n.h3,{id:"login",children:"login"}),"\n",(0,a.jsxs)(n.p,{children:["Write operations require you to be logged in to the Eik server. To log in, run the ",(0,a.jsx)(n.code,{children:"login"})," command."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik login\n"})}),"\n",(0,a.jsx)(n.p,{children:"The login command will ask for a server URL and a server key."}),"\n",(0,a.jsxs)(n.p,{children:["Server keys are configured on the server and, once entered,\nthe client will authenticate with the server and receive back\na JSON web token which it will save in an ",(0,a.jsx)(n.code,{children:".eikrc"})," file in the\nusers home directory for use in subsequent commands."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Login screenshot",src:i(6066).A+"",width:"400",height:"154"})}),"\n",(0,a.jsx)(n.h4,{id:"log-in-without-the-command-prompt",children:"Log in without the command prompt"}),"\n",(0,a.jsx)(n.p,{children:"It is possible to bypass login prompts by providing the server URL and key via command line flags."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik login --server https://eik.store.com --key YOUR_EIK_KEY\n"})}),"\n",(0,a.jsx)(n.h4,{id:"log-in-with-multiple-eik-servers",children:"Log in with multiple Eik servers"}),"\n",(0,a.jsxs)(n.p,{children:["It is possible to be authenticated against several Eik servers at once by calling the ",(0,a.jsx)(n.code,{children:"eik login"})," command multiple times and providing different server URLs and keys each time."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik login --server https://eik1.store.com --key YOUR_EIK_KEY\neik login --server https://eik2.store.com --key YOUR_EIK_KEY\n"})}),"\n",(0,a.jsx)(n.h4,{id:"once-logged-in",children:"Once logged in"}),"\n",(0,a.jsx)(n.p,{children:"So long as the client is logged in to a single server, all subsequent commands will know which server to use and provide credentials automatically."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik publish\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.em,{children:"N.B."})," If the client is authenticated with more than one server, it may be necessary to tell the client which server to use when using commands since the client will not decide which authenticated server to give precedence to. The ",(0,a.jsx)(n.code,{children:"--server"})," (or ",(0,a.jsx)(n.code,{children:"-s"})," for short) flag can be used to do this."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik publish --server https://eik.store.com\n"})}),"\n",(0,a.jsx)(n.h3,{id:"map-alias",children:"map-alias"}),"\n",(0,a.jsxs)(n.p,{children:["This command is deprecated, use ",(0,a.jsx)(n.code,{children:"eik alias"})]}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"#alias",children:"alias"})]}),"\n",(0,a.jsx)(n.h3,{id:"meta",children:"meta"}),"\n",(0,a.jsx)(n.p,{children:"Retrieve meta information by package, map or npm name."}),"\n",(0,a.jsx)(n.p,{children:"If a given name exists in several types (package and map for example), results will be returned and displayed from all matching types."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik meta <name>\n"})}),"\n",(0,a.jsx)(n.h3,{id:"npm-alias",children:"npm-alias"}),"\n",(0,a.jsxs)(n.p,{children:["This command is deprecated, use ",(0,a.jsx)(n.code,{children:"eik alias"})]}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"#alias",children:"alias"})]}),"\n",(0,a.jsx)(n.h3,{id:"package-alias",children:"package-alias"}),"\n",(0,a.jsxs)(n.p,{children:["This command is deprecated, use ",(0,a.jsx)(n.code,{children:"eik alias"})]}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"#alias",children:"alias"})]}),"\n",(0,a.jsx)(n.h3,{id:"ping",children:"ping"}),"\n",(0,a.jsx)(n.p,{children:"Ping an Eik server to check that it is responding."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik ping [server]\n"})}),"\n",(0,a.jsx)(n.h3,{id:"publish",children:"publish"}),"\n",(0,a.jsxs)(n.p,{children:["Publish a package to an Eik server. Reads configuration from ",(0,a.jsx)(n.a,{href:"/docs/reference/eik-json/",children:(0,a.jsx)(n.code,{children:"eik.json"})})," or ",(0,a.jsx)(n.code,{children:"package.json"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik publish\n"})}),"\n",(0,a.jsx)(n.h3,{id:"version",children:"version"}),"\n",(0,a.jsxs)(n.p,{children:["Compares local files with files on server and increments the ",(0,a.jsx)(n.code,{children:'"version"'})," field in ",(0,a.jsx)(n.a,{href:"/docs/reference/eik-json/",children:(0,a.jsx)(n.code,{children:"eik.json"})})," if necessary."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"eik version [level]\n"})}),"\n",(0,a.jsx)(n.h2,{id:"programatic-usage",children:"Programatic usage"}),"\n",(0,a.jsxs)(n.p,{children:["If you need to script commands from the Eik CLI, consider importing ",(0,a.jsx)(n.code,{children:"@eik/cli"})," in JavaScript."]}),"\n",(0,a.jsx)(n.p,{children:"The programatic API is mostly the same as the CLI, although the CLI has some extra named commands that use the same programatic API behind the scenes."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'import cli from "@eik/cli";\n'})}),"\n",(0,a.jsx)(n.p,{children:"Your editor should be able to show code suggestions and inline documentation for the API."}),"\n",(0,a.jsx)(n.h3,{id:"alias-1",children:"alias"}),"\n",(0,a.jsx)(n.p,{children:"Create or update an alias for a package on the Eik server."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const result = await cli.alias({\n\tserver,\n\tname,\n\tversion,\n\talias,\n\ttoken,\n\ttype,\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"integrity-1",children:"integrity"}),"\n",(0,a.jsx)(n.p,{children:"Get integrity information of a published asset."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const result = await cli.integrity({\n\tserver,\n\tname,\n\tversion,\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"login-1",children:"login"}),"\n",(0,a.jsxs)(n.p,{children:["Log in using a key to get the ",(0,a.jsx)(n.code,{children:"token"})," needed by other commands."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const result = await cli.integrity({\n\tserver,\n\tkey,\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"map",children:"map"}),"\n",(0,a.jsx)(n.p,{children:"Publish a map to the Eik server."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const result = await cli.map({\n\tserver,\n\tname,\n\tversion,\n\tfile,\n\ttoken,\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"meta-1",children:"meta"}),"\n",(0,a.jsx)(n.p,{children:"Get metadata about a published asset."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const result = await cli.meta({\n\tserver,\n\tname,\n\tversion,\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"ping-1",children:"ping"}),"\n",(0,a.jsx)(n.p,{children:"Ping the Eik server."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const result = await cli.ping({\n\tserver,\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"publish-1",children:"publish"}),"\n",(0,a.jsx)(n.p,{children:"Publish a package to the Eik server."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const result = await cli.publish({\n\tserver,\n\tname,\n\tversion,\n\tfile,\n\ttoken,\n\ttype,\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"version-1",children:"version"}),"\n",(0,a.jsxs)(n.p,{children:["Similar to ",(0,a.jsx)(n.code,{children:"npm version"}),", but updates ",(0,a.jsx)(n.code,{children:"eik.json"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const result = await cli.version({\n\tserver,\n\tname,\n\tversion,\n\tfiles,\n\ttype,\n});\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},6066:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/login-c1dd372d344e590e03125ffa37827f2a.png"},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(6540);const a={},l=s.createContext(a);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);